[{"C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\index.tsx":"1","C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\router\\config.ts":"2","C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\reportWebVitals.ts":"3","C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\App.tsx":"4","C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\router\\utils.ts":"5","C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\config\\index.ts":"6","C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\views\\system\\login\\index.tsx":"7","C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\views\\system\\component\\FormWrap.tsx":"8","C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\views\\system\\component\\LoginItem.tsx":"9","C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\views\\system\\component\\FormItem.tsx":"10","C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\store\\module\\user.ts":"11","C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\utils\\store.ts":"12","C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\hooks\\count.ts":"13","C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\utils\\cookie.ts":"14","C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\views\\system\\login\\service.ts":"15","C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\api\\request.ts":"16","C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\store\\index.ts":"17","C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\layout\\Layout.tsx":"18","C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\serviceWorker.ts":"19"},{"size":452,"mtime":1609730393818,"results":"20","hashOfConfig":"21"},{"size":1187,"mtime":1609401521395,"results":"22","hashOfConfig":"21"},{"size":425,"mtime":1607934020840,"results":"23","hashOfConfig":"24"},{"size":1125,"mtime":1609409248820,"results":"25","hashOfConfig":"21"},{"size":2644,"mtime":1609401139865,"results":"26","hashOfConfig":"21"},{"size":1003,"mtime":1609404641631,"results":"27","hashOfConfig":"21"},{"size":2912,"mtime":1609730551458,"results":"28","hashOfConfig":"21"},{"size":400,"mtime":1608534861863,"results":"29","hashOfConfig":"21"},{"size":3988,"mtime":1608534861866,"results":"30","hashOfConfig":"21"},{"size":2028,"mtime":1608877303751,"results":"31","hashOfConfig":"21"},{"size":1610,"mtime":1609405523467,"results":"32","hashOfConfig":"21"},{"size":905,"mtime":1608877250609,"results":"33","hashOfConfig":"21"},{"size":715,"mtime":1608877281260,"results":"34","hashOfConfig":"21"},{"size":301,"mtime":1608877586618,"results":"35","hashOfConfig":"21"},{"size":880,"mtime":1608878734385,"results":"36","hashOfConfig":"21"},{"size":2389,"mtime":1609404623918,"results":"37","hashOfConfig":"21"},{"size":1162,"mtime":1608890413640,"results":"38","hashOfConfig":"21"},{"size":2311,"mtime":1609405627629,"results":"39","hashOfConfig":"21"},{"size":5316,"mtime":1609409299940,"results":"40","hashOfConfig":"21"},{"filePath":"41","messages":"42","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"6spnu7",{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"45"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},"yj6kwa",{"filePath":"49","messages":"50","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"45"},{"filePath":"51","messages":"52","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"45"},{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"45"},{"filePath":"55","messages":"56","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"45"},{"filePath":"59","messages":"60","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"61","usedDeprecatedRules":"45"},{"filePath":"62","messages":"63","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"64","usedDeprecatedRules":"45"},{"filePath":"65","messages":"66","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"45"},{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"45"},{"filePath":"69","messages":"70","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"45"},{"filePath":"71","messages":"72","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"45"},{"filePath":"73","messages":"74","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"45"},{"filePath":"75","messages":"76","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"45"},{"filePath":"77","messages":"78","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"45"},{"filePath":"79","messages":"80","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"45"},{"filePath":"81","messages":"82","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"45"},"C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\index.tsx",[],"C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\router\\config.ts",[],["83","84"],"C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\reportWebVitals.ts",[],["85","86"],"C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\App.tsx",[],"C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\router\\utils.ts",[],"C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\config\\index.ts",[],"C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\views\\system\\login\\index.tsx",["87"],"C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\views\\system\\component\\FormWrap.tsx",[],"C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\views\\system\\component\\LoginItem.tsx",["88"],"import React, { memo, useCallback } from 'react';\r\nimport { LockOutlined, UserOutlined } from '@ant-design/icons';\r\nimport { InputProps } from 'antd/lib/input';\r\nimport { FormItemProps, FormInstance } from 'antd/lib/form';\r\nimport FormInputItem from './FormItem';\r\nimport { apiGetVerifyCode } from '../login/service';\r\n\r\nexport interface LoginItemType {\r\n  Account: React.FC<LoginItemProps>;\r\n  Password: React.FC<LoginItemProps>;\r\n  Confirm: React.FC<LoginItemProps>;\r\n  Mobile: React.FC<LoginItemProps>;\r\n  Code: React.FC<LoginItemProps>;\r\n}\r\n\r\ninterface LoginItemConfig {\r\n  name: string;\r\n  rules: any[];\r\n  inputProps: InputProps & { visibilityToggle?: boolean };\r\n}\r\n\r\ninterface LoginItemProps {\r\n  countStatic?: number;\r\n  onGetMobileCode?: (cb: () => void) => void;\r\n  form: FormInstance;\r\n}\r\n\r\nconst config: { [key in keyof LoginItemType]: LoginItemConfig } = {\r\n  Account: {\r\n    name: 'account',\r\n    inputProps: {\r\n      prefix: <UserOutlined />,\r\n      placeholder: '6-18位账号',\r\n      type: 'text',\r\n    },\r\n    rules: [{ required: true, message: '请输入合法账号', min: 6, max: 18 }],\r\n  },\r\n  Mobile: {\r\n    name: 'mobile',\r\n    inputProps: {\r\n      prefix: <UserOutlined />,\r\n      placeholder: '11位合法手机号',\r\n      type: 'mobile',\r\n    },\r\n    rules: [{ required: true, message: '请输入合法手机号', len: 11 }],\r\n  },\r\n  Password: {\r\n    name: 'password',\r\n    inputProps: {\r\n      prefix: <LockOutlined />,\r\n      placeholder: '大于6位的密码',\r\n      type: 'password',\r\n      visibilityToggle: true,\r\n    },\r\n    rules: [{ required: true, message: '请输入合法密码', min: 5 }],\r\n  },\r\n  Confirm: {\r\n    name: 'repassword',\r\n    inputProps: {\r\n      id: 'confirm',\r\n      prefix: <LockOutlined />,\r\n      placeholder: '确认密码',\r\n      type: 'password',\r\n      visibilityToggle: true,\r\n    },\r\n    rules: [],\r\n  },\r\n\r\n  Code: {\r\n    name: 'code',\r\n    inputProps: {\r\n      placeholder: '大于6位的密码',\r\n      prefix: <LockOutlined />,\r\n      type: 'code',\r\n    },\r\n    rules: [{ required: true, message: '请输入验证码', len: 6 }],\r\n  },\r\n};\r\n\r\nconst formProps: FormItemProps = {\r\n  hasFeedback: true,\r\n  children: null,\r\n};\r\n\r\nfunction Account(props: LoginItemProps) {\r\n  return <FormInputItem formProps={formProps} {...config.Account} {...props} />;\r\n}\r\n\r\nfunction Password(props: LoginItemProps) {\r\n  return <FormInputItem formProps={formProps} {...config.Password} {...props} />;\r\n}\r\n\r\nfunction Confirm(props: LoginItemProps) {\r\n  return (\r\n    <FormInputItem\r\n      formProps={formProps}\r\n      {...config.Confirm}\r\n      {...props}\r\n      rules={[\r\n        { required: true, message: '请输入合法密码' },\r\n        {\r\n          validator: (rules: any, value: string, callback: (message?: string) => void) => {\r\n            if (value && value !== props.form.getFieldValue('password')) {\r\n              callback('两次输入的密码不一致，请重新输入');\r\n            }\r\n\r\n            callback();\r\n          },\r\n        },\r\n      ]}\r\n    />\r\n  );\r\n}\r\n\r\nfunction Mobile(props: LoginItemProps) {\r\n  return <FormInputItem formProps={formProps} {...config.Mobile} {...props} />;\r\n}\r\n\r\nfunction Code(props: LoginItemProps) {\r\n  // 在测试环境下，接口会直接跑错，显示验证码,所以需要在catch的情况下 也回调\r\n  const onGetMobileCode = useCallback((cb: () => void) => {\r\n    props.form.validateFields(['mobile']).then(res => {\r\n      apiGetVerifyCode({ mobile: res.mobile })\r\n        .then(() => {\r\n          cb();\r\n        })\r\n        .catch(() => {\r\n          cb();\r\n        });\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <FormInputItem\r\n      formProps={{ children: null }}\r\n      {...config.Code}\r\n      {...props}\r\n      onGetMobileCode={onGetMobileCode}\r\n    />\r\n  );\r\n}\r\n\r\nconst LoginItem: LoginItemType = {\r\n  Account: memo(Account),\r\n  Password: memo(Password),\r\n  Confirm: memo(Confirm),\r\n  Mobile: memo(Mobile),\r\n  Code: memo(Code),\r\n};\r\n\r\nexport default LoginItem;\r\n","C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\views\\system\\component\\FormItem.tsx",["89"],"import React, { memo, useEffect } from 'react';\r\nimport { Button, Col, Row, Form } from 'antd';\r\nimport { FormItemProps } from 'antd/lib/form';\r\nimport Input, { InputProps } from 'antd/lib/input';\r\nimport useCount from '../../../hooks/count';\r\n\r\nconst COUNT_STATIC = 60;\r\n\r\nexport interface FormInputItemProps {\r\n  name: string;\r\n  rules: any[];\r\n  formProps: FormItemProps;\r\n  inputProps: InputProps & { visibilityToggle?: boolean };\r\n  countStatic?: number;\r\n  onGetMobileCode?: (cb: () => void) => void;\r\n}\r\n\r\nfunction FormInputItem(props: FormInputItemProps) {\r\n  const [count, beginTimer, closeTimer] = useCount(COUNT_STATIC);\r\n\r\n  const onTimerClick = () => {\r\n    if (props.onGetMobileCode) {\r\n      props.onGetMobileCode(() => {\r\n        beginTimer();\r\n      });\r\n    }\r\n  };\r\n\r\n  useEffect(\r\n    () => () => {\r\n      // 在验证码情况下，需要在组件卸载的时候清除定时器，防止内存泄漏\r\n      if (props.name === 'code') {\r\n        closeTimer();\r\n      }\r\n    },\r\n    [],\r\n  );\r\n\r\n  return (\r\n    <Form.Item {...props.formProps} name={props.name} rules={props.rules}>\r\n      {(() => {\r\n        switch (props.inputProps.type) {\r\n          case 'password':\r\n            return <Input.Password {...props.inputProps}></Input.Password>;\r\n          case 'code':\r\n            return (\r\n              <Row gutter={10}>\r\n                <Col span={16}>\r\n                  <Input {...props.inputProps} type=\"text\" />\r\n                </Col>\r\n                <Col span={8}>\r\n                  <Button\r\n                    disabled={(props.countStatic || COUNT_STATIC) !== count}\r\n                    block\r\n                    onClick={onTimerClick}\r\n                  >\r\n                    {count === COUNT_STATIC ? '验证码' : `${count}S`}\r\n                  </Button>\r\n                </Col>\r\n              </Row>\r\n            );\r\n          default:\r\n            return <Input {...props.inputProps}></Input>;\r\n        }\r\n      })()}\r\n    </Form.Item>\r\n  );\r\n}\r\n\r\nexport default memo(FormInputItem);\r\n","C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\store\\module\\user.ts",[],"C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\utils\\store.ts",[],"C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\hooks\\count.ts",[],"C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\utils\\cookie.ts",[],"C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\views\\system\\login\\service.ts",[],"C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\api\\request.ts",[],"C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\store\\index.ts",[],"C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\layout\\Layout.tsx",[],"C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\serviceWorker.ts",[],{"ruleId":"90","replacedBy":"91"},{"ruleId":"92","replacedBy":"93"},{"ruleId":"90","replacedBy":"94"},{"ruleId":"92","replacedBy":"95"},{"ruleId":"96","severity":1,"message":"97","line":46,"column":6,"nodeType":"98","endLine":46,"endColumn":8,"suggestions":"99"},{"ruleId":"96","severity":1,"message":"100","line":131,"column":6,"nodeType":"98","endLine":131,"endColumn":8,"suggestions":"101"},{"ruleId":"96","severity":1,"message":"102","line":36,"column":5,"nodeType":"98","endLine":36,"endColumn":7,"suggestions":"103"},"no-native-reassign",["104"],"no-negated-in-lhs",["105"],["104"],["105"],"react-hooks/exhaustive-deps","React Hook useCallback has a missing dependency: 'form'. Either include it or remove the dependency array.","ArrayExpression",["106"],"React Hook useCallback has a missing dependency: 'props.form'. Either include it or remove the dependency array.",["107"],"React Hook useEffect has missing dependencies: 'closeTimer' and 'props.name'. Either include them or remove the dependency array.",["108"],"no-global-assign","no-unsafe-negation",{"desc":"109","fix":"110"},{"desc":"111","fix":"112"},{"desc":"113","fix":"114"},"Update the dependencies array to be: [form]",{"range":"115","text":"116"},"Update the dependencies array to be: [props.form]",{"range":"117","text":"118"},"Update the dependencies array to be: [closeTimer, props.name]",{"range":"119","text":"120"},[1351,1353],"[form]",[3394,3396],"[props.form]",[941,943],"[closeTimer, props.name]"]