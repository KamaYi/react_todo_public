[{"C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\index.tsx":"1","C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\router\\config.ts":"2","C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\reportWebVitals.ts":"3","C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\App.tsx":"4","C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\router\\utils.ts":"5","C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\config\\index.ts":"6","C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\views\\layout\\layout.tsx":"7","C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\views\\system\\login\\index.tsx":"8","C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\views\\system\\component\\FormWrap.tsx":"9","C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\views\\system\\component\\LoginItem.tsx":"10","C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\views\\system\\component\\FormItem.tsx":"11","C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\store\\module\\user.ts":"12","C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\utils\\store.ts":"13","C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\hooks\\count.ts":"14","C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\utils\\cookie.ts":"15","C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\views\\system\\login\\service.ts":"16","C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\api\\request.ts":"17","C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\store\\index.ts":"18"},{"size":586,"mtime":1607935794146,"results":"19","hashOfConfig":"20"},{"size":1157,"mtime":1608802486074,"results":"21","hashOfConfig":"20"},{"size":425,"mtime":1607934020840,"results":"22","hashOfConfig":"20"},{"size":942,"mtime":1608876909205,"results":"23","hashOfConfig":"20"},{"size":2550,"mtime":1608890740062,"results":"24","hashOfConfig":"20"},{"size":1065,"mtime":1608779052404,"results":"25","hashOfConfig":"20"},{"size":2176,"mtime":1608890724576,"results":"26","hashOfConfig":"20"},{"size":2892,"mtime":1608890569960,"results":"27","hashOfConfig":"20"},{"size":400,"mtime":1608534861863,"results":"28","hashOfConfig":"20"},{"size":3988,"mtime":1608534861866,"results":"29","hashOfConfig":"20"},{"size":2028,"mtime":1608877303751,"results":"30","hashOfConfig":"20"},{"size":1610,"mtime":1608877215824,"results":"31","hashOfConfig":"20"},{"size":905,"mtime":1608877250609,"results":"32","hashOfConfig":"20"},{"size":715,"mtime":1608877281260,"results":"33","hashOfConfig":"20"},{"size":301,"mtime":1608877586618,"results":"34","hashOfConfig":"20"},{"size":880,"mtime":1608878734385,"results":"35","hashOfConfig":"20"},{"size":2405,"mtime":1608878438111,"results":"36","hashOfConfig":"20"},{"size":1162,"mtime":1608890413640,"results":"37","hashOfConfig":"20"},{"filePath":"38","messages":"39","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},"yj6kwa",{"filePath":"41","messages":"42","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"49","messages":"50","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"51","messages":"52","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"53","messages":"54","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"55","usedDeprecatedRules":"40"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"58","messages":"59","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"60","usedDeprecatedRules":"40"},{"filePath":"61","messages":"62","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"63","usedDeprecatedRules":"40"},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"68","messages":"69","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"70","messages":"71","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"72","messages":"73","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"74","messages":"75","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"76","messages":"77","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\index.tsx",[],["78","79"],"C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\router\\config.ts",[],"C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\reportWebVitals.ts",[],"C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\App.tsx",[],"C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\router\\utils.ts",[],"C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\config\\index.ts",[],"C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\views\\layout\\layout.tsx",[],"C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\views\\system\\login\\index.tsx",["80","81"],"import React, { useState, useCallback } from 'react';\r\nimport { Tabs, Checkbox, Button, Form } from 'antd';\r\nimport { GithubOutlined, ZhihuOutlined } from '@ant-design/icons';\r\nimport { Link, RouteComponentProps } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { setUserInfo, UserState } from '../../../store/module/user';\r\nimport FormWrap from '../component/FormWrap';\r\nimport LoginItem from '../component/LoginItem';\r\n\r\ninterface LoginProps extends RouteComponentProps {\r\n  setUserInfo: (userInfo: UserState) => void;\r\n}\r\ninterface FormProp {\r\n  account?: string;\r\n  mobile?: string;\r\n  password?: string;\r\n  code?: number;\r\n}\r\n\r\nfunction Login(props: LoginProps) {\r\n  const [activeTab, setActiveTab] = useState('account');\r\n  const [form] = Form.useForm();\r\n\r\n  const next = () => {\r\n    const params = new URLSearchParams(window.location.search);\r\n    const redirectURL = params.get('redirectURL');\r\n    if (redirectURL) {\r\n      window.location.href = redirectURL;\r\n      return;\r\n    }\r\n    props.history.push('/');\r\n  };\r\n\r\n  const onSubmit = useCallback(() => {\r\n    form.validateFields().then(res => {\r\n      const values = res as FormProp;\r\n      if (values.account && values.password) {\r\n\r\n        return;\r\n      }\r\n\r\n      if (values.mobile && values.code) {\r\n        \r\n      }\r\n    });\r\n  }, []);\r\n  return (\r\n    <FormWrap className=\"page-login\">\r\n      <Tabs defaultActiveKey={activeTab} onChange={setActiveTab}>\r\n        <Tabs.TabPane tab=\"账号密码登录\" key=\"account\"></Tabs.TabPane>\r\n        <Tabs.TabPane tab=\"手机号登录\" key=\"mobile\"></Tabs.TabPane>\r\n      </Tabs>\r\n\r\n      <Form onFinish={onSubmit} form={form}>\r\n        {activeTab === 'account' ? (\r\n          <>\r\n            <LoginItem.Account form={form} />\r\n            <LoginItem.Password form={form} />\r\n          </>\r\n        ) : (\r\n          <>\r\n            <LoginItem.Mobile form={form} />\r\n            <LoginItem.Code form={form} />\r\n          </>\r\n        )}\r\n\r\n        <Form.Item>\r\n          <div className=\"align--between\">\r\n            <Checkbox defaultChecked>自动登录</Checkbox>\r\n            <Link to=\"/system/recovery-pwd\">忘记密码</Link>\r\n          </div>\r\n        </Form.Item>\r\n\r\n        <Form.Item>\r\n          <Button block htmlType=\"submit\" type=\"primary\">\r\n            登录\r\n          </Button>\r\n        </Form.Item>\r\n\r\n        <Form.Item>\r\n          <div className=\"align--between\">\r\n            <div className=\"page-login__others\">\r\n              其他登录方式\r\n              <GithubOutlined className=\"page-login__icon\"></GithubOutlined>\r\n              <ZhihuOutlined className=\"page-login__icon\"></ZhihuOutlined>\r\n            </div>\r\n            <Link to=\"/system/register\">注册账号</Link>\r\n          </div>\r\n        </Form.Item>\r\n      </Form>\r\n    </FormWrap>\r\n  );\r\n}\r\n\r\nexport default connect(() => ({}), {\r\n  setUserInfo,\r\n})(Login);\r\n","C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\views\\system\\component\\FormWrap.tsx",[],"C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\views\\system\\component\\LoginItem.tsx",["82"],"import React, { memo, useCallback } from 'react';\r\nimport { LockOutlined, UserOutlined } from '@ant-design/icons';\r\nimport { InputProps } from 'antd/lib/input';\r\nimport { FormItemProps, FormInstance } from 'antd/lib/form';\r\nimport FormInputItem from './FormItem';\r\nimport { apiGetVerifyCode } from '../login/service';\r\n\r\nexport interface LoginItemType {\r\n  Account: React.FC<LoginItemProps>;\r\n  Password: React.FC<LoginItemProps>;\r\n  Confirm: React.FC<LoginItemProps>;\r\n  Mobile: React.FC<LoginItemProps>;\r\n  Code: React.FC<LoginItemProps>;\r\n}\r\n\r\ninterface LoginItemConfig {\r\n  name: string;\r\n  rules: any[];\r\n  inputProps: InputProps & { visibilityToggle?: boolean };\r\n}\r\n\r\ninterface LoginItemProps {\r\n  countStatic?: number;\r\n  onGetMobileCode?: (cb: () => void) => void;\r\n  form: FormInstance;\r\n}\r\n\r\nconst config: { [key in keyof LoginItemType]: LoginItemConfig } = {\r\n  Account: {\r\n    name: 'account',\r\n    inputProps: {\r\n      prefix: <UserOutlined />,\r\n      placeholder: '6-18位账号',\r\n      type: 'text',\r\n    },\r\n    rules: [{ required: true, message: '请输入合法账号', min: 6, max: 18 }],\r\n  },\r\n  Mobile: {\r\n    name: 'mobile',\r\n    inputProps: {\r\n      prefix: <UserOutlined />,\r\n      placeholder: '11位合法手机号',\r\n      type: 'mobile',\r\n    },\r\n    rules: [{ required: true, message: '请输入合法手机号', len: 11 }],\r\n  },\r\n  Password: {\r\n    name: 'password',\r\n    inputProps: {\r\n      prefix: <LockOutlined />,\r\n      placeholder: '大于6位的密码',\r\n      type: 'password',\r\n      visibilityToggle: true,\r\n    },\r\n    rules: [{ required: true, message: '请输入合法密码', min: 5 }],\r\n  },\r\n  Confirm: {\r\n    name: 'repassword',\r\n    inputProps: {\r\n      id: 'confirm',\r\n      prefix: <LockOutlined />,\r\n      placeholder: '确认密码',\r\n      type: 'password',\r\n      visibilityToggle: true,\r\n    },\r\n    rules: [],\r\n  },\r\n\r\n  Code: {\r\n    name: 'code',\r\n    inputProps: {\r\n      placeholder: '大于6位的密码',\r\n      prefix: <LockOutlined />,\r\n      type: 'code',\r\n    },\r\n    rules: [{ required: true, message: '请输入验证码', len: 6 }],\r\n  },\r\n};\r\n\r\nconst formProps: FormItemProps = {\r\n  hasFeedback: true,\r\n  children: null,\r\n};\r\n\r\nfunction Account(props: LoginItemProps) {\r\n  return <FormInputItem formProps={formProps} {...config.Account} {...props} />;\r\n}\r\n\r\nfunction Password(props: LoginItemProps) {\r\n  return <FormInputItem formProps={formProps} {...config.Password} {...props} />;\r\n}\r\n\r\nfunction Confirm(props: LoginItemProps) {\r\n  return (\r\n    <FormInputItem\r\n      formProps={formProps}\r\n      {...config.Confirm}\r\n      {...props}\r\n      rules={[\r\n        { required: true, message: '请输入合法密码' },\r\n        {\r\n          validator: (rules: any, value: string, callback: (message?: string) => void) => {\r\n            if (value && value !== props.form.getFieldValue('password')) {\r\n              callback('两次输入的密码不一致，请重新输入');\r\n            }\r\n\r\n            callback();\r\n          },\r\n        },\r\n      ]}\r\n    />\r\n  );\r\n}\r\n\r\nfunction Mobile(props: LoginItemProps) {\r\n  return <FormInputItem formProps={formProps} {...config.Mobile} {...props} />;\r\n}\r\n\r\nfunction Code(props: LoginItemProps) {\r\n  // 在测试环境下，接口会直接跑错，显示验证码,所以需要在catch的情况下 也回调\r\n  const onGetMobileCode = useCallback((cb: () => void) => {\r\n    props.form.validateFields(['mobile']).then(res => {\r\n      apiGetVerifyCode({ mobile: res.mobile })\r\n        .then(() => {\r\n          cb();\r\n        })\r\n        .catch(() => {\r\n          cb();\r\n        });\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <FormInputItem\r\n      formProps={{ children: null }}\r\n      {...config.Code}\r\n      {...props}\r\n      onGetMobileCode={onGetMobileCode}\r\n    />\r\n  );\r\n}\r\n\r\nconst LoginItem: LoginItemType = {\r\n  Account: memo(Account),\r\n  Password: memo(Password),\r\n  Confirm: memo(Confirm),\r\n  Mobile: memo(Mobile),\r\n  Code: memo(Code),\r\n};\r\n\r\nexport default LoginItem;\r\n","C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\views\\system\\component\\FormItem.tsx",["83"],"import React, { memo, useEffect } from 'react';\r\nimport { Button, Col, Row, Form } from 'antd';\r\nimport { FormItemProps } from 'antd/lib/form';\r\nimport Input, { InputProps } from 'antd/lib/input';\r\nimport useCount from '../../../hooks/count';\r\n\r\nconst COUNT_STATIC = 60;\r\n\r\nexport interface FormInputItemProps {\r\n  name: string;\r\n  rules: any[];\r\n  formProps: FormItemProps;\r\n  inputProps: InputProps & { visibilityToggle?: boolean };\r\n  countStatic?: number;\r\n  onGetMobileCode?: (cb: () => void) => void;\r\n}\r\n\r\nfunction FormInputItem(props: FormInputItemProps) {\r\n  const [count, beginTimer, closeTimer] = useCount(COUNT_STATIC);\r\n\r\n  const onTimerClick = () => {\r\n    if (props.onGetMobileCode) {\r\n      props.onGetMobileCode(() => {\r\n        beginTimer();\r\n      });\r\n    }\r\n  };\r\n\r\n  useEffect(\r\n    () => () => {\r\n      // 在验证码情况下，需要在组件卸载的时候清除定时器，防止内存泄漏\r\n      if (props.name === 'code') {\r\n        closeTimer();\r\n      }\r\n    },\r\n    [],\r\n  );\r\n\r\n  return (\r\n    <Form.Item {...props.formProps} name={props.name} rules={props.rules}>\r\n      {(() => {\r\n        switch (props.inputProps.type) {\r\n          case 'password':\r\n            return <Input.Password {...props.inputProps}></Input.Password>;\r\n          case 'code':\r\n            return (\r\n              <Row gutter={10}>\r\n                <Col span={16}>\r\n                  <Input {...props.inputProps} type=\"text\" />\r\n                </Col>\r\n                <Col span={8}>\r\n                  <Button\r\n                    disabled={(props.countStatic || COUNT_STATIC) !== count}\r\n                    block\r\n                    onClick={onTimerClick}\r\n                  >\r\n                    {count === COUNT_STATIC ? '验证码' : `${count}S`}\r\n                  </Button>\r\n                </Col>\r\n              </Row>\r\n            );\r\n          default:\r\n            return <Input {...props.inputProps}></Input>;\r\n        }\r\n      })()}\r\n    </Form.Item>\r\n  );\r\n}\r\n\r\nexport default memo(FormInputItem);\r\n","C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\store\\module\\user.ts",[],"C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\utils\\store.ts",[],"C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\hooks\\count.ts",[],"C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\utils\\cookie.ts",[],"C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\views\\system\\login\\service.ts",[],"C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\api\\request.ts",[],"C:\\Users\\limingyi\\Desktop\\vue3\\react_todo\\src\\store\\index.ts",[],{"ruleId":"84","replacedBy":"85"},{"ruleId":"86","replacedBy":"87"},{"ruleId":"88","severity":1,"message":"89","line":24,"column":9,"nodeType":"90","messageId":"91","endLine":24,"endColumn":13},{"ruleId":"92","severity":1,"message":"93","line":46,"column":6,"nodeType":"94","endLine":46,"endColumn":8,"suggestions":"95"},{"ruleId":"92","severity":1,"message":"96","line":131,"column":6,"nodeType":"94","endLine":131,"endColumn":8,"suggestions":"97"},{"ruleId":"92","severity":1,"message":"98","line":36,"column":5,"nodeType":"94","endLine":36,"endColumn":7,"suggestions":"99"},"no-native-reassign",["100"],"no-negated-in-lhs",["101"],"@typescript-eslint/no-unused-vars","'next' is assigned a value but never used.","Identifier","unusedVar","react-hooks/exhaustive-deps","React Hook useCallback has a missing dependency: 'form'. Either include it or remove the dependency array.","ArrayExpression",["102"],"React Hook useCallback has a missing dependency: 'props.form'. Either include it or remove the dependency array.",["103"],"React Hook useEffect has missing dependencies: 'closeTimer' and 'props.name'. Either include them or remove the dependency array.",["104"],"no-global-assign","no-unsafe-negation",{"desc":"105","fix":"106"},{"desc":"107","fix":"108"},{"desc":"109","fix":"110"},"Update the dependencies array to be: [form]",{"range":"111","text":"112"},"Update the dependencies array to be: [props.form]",{"range":"113","text":"114"},"Update the dependencies array to be: [closeTimer, props.name]",{"range":"115","text":"116"},[1331,1333],"[form]",[3394,3396],"[props.form]",[941,943],"[closeTimer, props.name]"]